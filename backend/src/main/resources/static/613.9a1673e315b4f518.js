"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[613],{7613:(de,g,l)=>{l.r(g),l.d(g,{StaffModule:()=>re});var c=l(6814),x=l(8463),C=l(7664),d=l(5219),e=l(4946),v=l(4827),T=l(6139),Z=l(6860),b=l(3904),_=l(707),u=l(3714),m=l(7213),f=l(9378),y=l(4237),A=l(1480),p=l(95);function J(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",6)(1,"p-button",7),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.openDialogNew())}),e.qZA()()}}function U(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",10)(1,"app-post",11),e.NdJ("isEditing",function(){const s=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.openDialogEdit(s))}),e.qZA()()}if(2&o){const t=a.$implicit;e.xp6(1),e.Q6J("post",t)("canEdit",!0)}}function N(o,a){if(1&o&&(e.TgZ(0,"div",8),e.YNc(1,U,2,2,"div",9),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.Q6J("ngForOf",t)}}function F(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",13)(1,"label",23),e._uU(2,"ID"),e.qZA(),e.TgZ(3,"input",24),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw(2);return e.KtG(s.post.id=n)}),e.qZA()()}if(2&o){const t=e.oxw(2);e.xp6(3),e.Q6J("ngModel",t.post.id)}}function w(o,a){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",13)(2,"label",25),e._uU(3,"Created Date"),e.qZA(),e.TgZ(4,"input",26),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw(2);return e.KtG(s.post.createdDate=n)}),e.qZA()(),e.TgZ(5,"div",13)(6,"label",27),e._uU(7,"Created By"),e.qZA(),e.TgZ(8,"input",28),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw(2);return e.KtG(s.post.createdBy=n)}),e.qZA()(),e.TgZ(9,"div",13)(10,"label",29),e._uU(11,"Last Modified Date"),e.qZA(),e.TgZ(12,"input",30),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw(2);return e.KtG(s.post.lastModifiedDate=n)}),e.qZA()(),e.TgZ(13,"div",13)(14,"label",31),e._uU(15,"Last Modified By"),e.qZA(),e.TgZ(16,"input",32),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw(2);return e.KtG(s.post.lastModifiedBy=n)}),e.qZA()(),e.BQk()}if(2&o){const t=e.oxw(2);e.xp6(4),e.Q6J("ngModel",t.post.createdDate),e.xp6(4),e.Q6J("ngModel",t.post.createdBy),e.xp6(4),e.Q6J("ngModel",t.post.lastModifiedDate),e.xp6(4),e.Q6J("ngModel",t.post.lastModifiedBy)}}const D=function(){return{height:"320px"}};function S(o,a){if(1&o){const t=e.EpF();e.YNc(0,F,4,1,"div",12),e.TgZ(1,"div",13)(2,"label",14),e._uU(3,"Title"),e.qZA(),e.TgZ(4,"input",15),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.post.title=n)}),e.qZA()(),e.TgZ(5,"div",13)(6,"label",16),e._uU(7,"Tags"),e.qZA(),e.TgZ(8,"p-chips",17),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.post.tags=n)}),e.qZA()(),e.TgZ(9,"div",13)(10,"label",18),e._uU(11,"Content"),e.qZA(),e.TgZ(12,"p-editor",17),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.post.content=n)}),e.qZA()(),e.YNc(13,w,17,4,"ng-container",19),e.TgZ(14,"div",20)(15,"p-button",21),e.NdJ("click",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.delete(n))}),e.qZA(),e.TgZ(16,"p-button",22),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.save())}),e.qZA()()}if(2&o){const t=e.oxw();e.Q6J("ngIf",t.isEdit),e.xp6(4),e.Q6J("ngModel",t.post.title),e.xp6(4),e.Q6J("ngModel",t.post.tags),e.xp6(4),e.Akn(e.DdM(7,D)),e.Q6J("ngModel",t.post.content),e.xp6(1),e.Q6J("ngIf",t.isEdit)}}const q=function(){return{width:"80vw"}};let I=(()=>{class o{constructor(t,i,n){this.postService=t,this.messageService=i,this.confirmationService=n,this.posts=[],this.isVisible=!1,this.isEdit=!1,this.post={}}ngOnInit(){this.getPosts()}getPosts(){this.postService.getPosts().subscribe({next:t=>{this.posts=t},error:t=>{console.log(t)}})}openDialogNew(){this.isEdit=!1,this.isVisible=!0,this.post={}}openDialogEdit(t){this.isEdit=!0,this.isVisible=!0,this.post={...t}}save(){this.post.id?this.postService.update(this.post.id,this.post).subscribe({next:t=>{this.isVisible=!1;const i=this.posts.findIndex(n=>n.id===this.post.id);-1!=i&&(this.posts[i]=this.post),this.messageService.add({severity:"success",summary:"Success",detail:"Post is updated"})},error:t=>{console.log(t)}}):this.postService.create(this.post).subscribe({next:t=>{this.post.id=t,this.isVisible=!1,this.posts.unshift({...this.post,id:t,createdDate:(new Date).toJSON()}),this.posts=[...this.posts],this.messageService.add({severity:"success",summary:"Success",detail:"Post is added"})},error:t=>{console.log(t)}})}delete(t){this.confirmationService.confirm({target:t.target,message:"Do you want to delete this post?",header:"Delete Confirmation",icon:"pi pi-info-circle",acceptButtonStyleClass:"p-button-danger p-button-text",rejectButtonStyleClass:"p-button-text p-button-text",acceptIcon:"none",rejectIcon:"none",accept:()=>{this.post.id&&this.postService.deletePost(this.post.id).subscribe({next:()=>{this.posts=this.posts.filter(i=>i.id!==this.post.id),this.isVisible=!1,this.messageService.add({severity:"info",summary:"Confirmed",detail:"Post deleted"})},error:i=>{console.log(i)}})},reject:()=>{}})}static#e=this.\u0275fac=function(i){return new(i||o)(e.Y36(v.L),e.Y36(d.ez),e.Y36(d.YP))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-feed"]],features:[e._Bn([d.ez,d.YP])],decls:8,vars:11,consts:[[3,"value","layout","rows","paginator"],["dv",""],["pTemplate","header"],["pTemplate","grid"],["header","Post details",3,"visible","modal","draggable","resizable","visibleChange"],["pTemplate","content"],[1,"flex","justify-content-end"],["label","Write","severity","success",3,"click"],[1,"grid","grid-nogutter"],["class","col-12 sm:col-12 md:col-6 lg:col-6 xl:col-4 p-2",4,"ngFor","ngForOf"],[1,"col-12","sm:col-12","md:col-6","lg:col-6","xl:col-4","p-2"],[3,"post","canEdit","isEditing"],["class","flex flex-column gap-2 mb-4",4,"ngIf"],[1,"flex","flex-column","gap-2","mb-4"],["for","title"],["pInputText","","id","title",3,"ngModel","ngModelChange"],["for","tags"],[3,"ngModel","ngModelChange"],["for","content"],[4,"ngIf"],[1,"flex","justify-content-end","gap-2","mb-4"],["label","Delete","severity","danger",3,"click"],["label","Save","severity","success",3,"click"],["for","id"],["pInputText","","id","id","readonly","",3,"ngModel","ngModelChange"],["for","createdDate"],["pInputText","","id","createdDate","readonly","",3,"ngModel","ngModelChange"],["for","createdBy"],["pInputText","","id","createdBy","readonly","",3,"ngModel","ngModelChange"],["for","lastModifiedDate"],["pInputText","","id","lastModifiedDate","readonly","",3,"ngModel","ngModelChange"],["for","lastModifiedBy"],["pInputText","","id","lastModifiedBy","readonly","",3,"ngModel","ngModelChange"]],template:function(i,n){1&i&&(e.TgZ(0,"p-dataView",0,1),e.YNc(2,J,2,0,"ng-template",2),e.YNc(3,N,2,1,"ng-template",3),e.qZA(),e.TgZ(4,"p-dialog",4),e.NdJ("visibleChange",function(r){return n.isVisible=r}),e.YNc(5,S,17,8,"ng-template",5),e.qZA(),e._UZ(6,"p-toast")(7,"p-confirmDialog")),2&i&&(e.Q6J("value",n.posts)("layout","grid")("rows",6)("paginator",!0),e.xp6(4),e.Akn(e.DdM(10,q)),e.Q6J("visible",n.isVisible)("modal",!0)("draggable",!1)("resizable",!1))},dependencies:[T.A,c.sg,c.O5,d.jx,Z.ML,b.Q,_.zx,u.o,m.V,f.FN,y.VO,A.cL,p.Fj,p.JJ,p.On]})}return o})();var Q=l(2018),E=l(9862);let B=(()=>{class o{constructor(t){this.http=t,this.apiURL=Q.T+"api/v1/roles"}getRoles(){return this.http.get(this.apiURL)}static#e=this.\u0275fac=function(i){return new(i||o)(e.LFG(E.eN))};static#t=this.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var G=l(2799),K=l(1423),h=l(5590),H=l(3453),V=l(6128);function Y(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",8)(1,"p-button",9),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.openDialogNew())}),e.qZA(),e.TgZ(2,"span",10),e._UZ(3,"i",11),e.TgZ(4,"input",12,13),e.NdJ("input",function(){e.CHM(t);const n=e.MAs(5);e.oxw();const s=e.MAs(2);return e.KtG(s.filterGlobal(n.value,"contains"))}),e.qZA()()()}}function L(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"p-dropdown",17),e.NdJ("onChange",function(n){const r=e.CHM(t).filterCallback;return e.KtG(r(n.value))}),e.qZA()}if(2&o){const t=a.$implicit,i=e.oxw(2);e.Q6J("ngModel",t)("options",i.roles)("showClear",!0)}}function z(o,a){1&o&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Email"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Fullname"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Role"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Status"),e.qZA()(),e.TgZ(9,"tr"),e._UZ(10,"th")(11,"th"),e.TgZ(12,"th")(13,"p-columnFilter",14),e.YNc(14,L,1,3,"ng-template",15),e.qZA()(),e.TgZ(15,"th"),e._UZ(16,"p-columnFilter",16),e.qZA()()),2&o&&(e.xp6(13),e.Q6J("showMenu",!1))}const O=function(o,a){return{"text-green-500 pi-check-circle":o,"text-red-500 pi-times-circle":a}};function k(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"tr",18),e.NdJ("dblclick",function(){const s=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.openDialogEdit(s))}),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._UZ(8,"i",19),e.qZA()()}if(2&o){const t=a.$implicit,i=e.oxw();e.xp6(2),e.Oqu(t.email),e.xp6(2),e.Oqu(t.fullname),e.xp6(2),e.Oqu(i.getRole(t.roleId)),e.xp6(2),e.Q6J("ngClass",e.WLB(4,O,t.active,!t.active))}}function j(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",21)(1,"label",33),e._uU(2,"ID"),e.qZA(),e.TgZ(3,"input",34),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw(2);return e.KtG(s.user.id=n)}),e.qZA()()}if(2&o){const t=e.oxw(2);e.xp6(3),e.Q6J("ngModel",t.user.id)}}const M=function(){return{width:"100%"}};function P(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",21)(1,"label",35),e._uU(2,"Password"),e.qZA(),e.TgZ(3,"p-password",36),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw(2);return e.KtG(s.user.password=n)}),e.qZA()()}if(2&o){const t=e.oxw(2);e.xp6(3),e.Akn(e.DdM(5,M)),e.Q6J("ngModel",t.user.password)("feedback",!1)("inputStyle",e.DdM(6,M))}}function R(o,a){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",21)(2,"label",37),e._uU(3,"Created Date"),e.qZA(),e.TgZ(4,"input",38),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw(2);return e.KtG(s.user.createdDate=n)}),e.qZA()(),e.TgZ(5,"div",21)(6,"label",39),e._uU(7,"Created By"),e.qZA(),e.TgZ(8,"input",40),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw(2);return e.KtG(s.user.createdBy=n)}),e.qZA()(),e.TgZ(9,"div",21)(10,"label",41),e._uU(11,"Last Modified Date"),e.qZA(),e.TgZ(12,"input",42),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw(2);return e.KtG(s.user.lastModifiedDate=n)}),e.qZA()(),e.TgZ(13,"div",21)(14,"label",43),e._uU(15,"Last Modified By"),e.qZA(),e.TgZ(16,"input",44),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw(2);return e.KtG(s.user.lastModifiedBy=n)}),e.qZA()(),e.BQk()}if(2&o){const t=e.oxw(2);e.xp6(4),e.Q6J("ngModel",t.user.createdDate),e.xp6(4),e.Q6J("ngModel",t.user.createdBy),e.xp6(4),e.Q6J("ngModel",t.user.lastModifiedDate),e.xp6(4),e.Q6J("ngModel",t.user.lastModifiedBy)}}const $=function(){return{label:"Active",value:!0}},W=function(){return{label:"Disable",value:!1}},X=function(o,a){return[o,a]};function ee(o,a){if(1&o){const t=e.EpF();e.YNc(0,j,4,1,"div",20),e.TgZ(1,"div",21)(2,"label",22),e._uU(3,"Role"),e.qZA(),e.TgZ(4,"p-dropdown",23),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.user.roleId=n)}),e.qZA()(),e.TgZ(5,"div",21)(6,"label",22),e._uU(7,"Status"),e.qZA(),e.TgZ(8,"p-selectButton",24),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.user.active=n)}),e.qZA()(),e.TgZ(9,"div",21)(10,"label",25),e._uU(11,"Email"),e.qZA(),e.TgZ(12,"input",26),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.user.email=n)}),e.qZA()(),e.YNc(13,P,4,7,"div",20),e.TgZ(14,"div",21)(15,"label",27),e._uU(16,"Fullname"),e.qZA(),e.TgZ(17,"input",28),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.user.fullname=n)}),e.qZA()(),e.YNc(18,R,17,4,"ng-container",29),e.TgZ(19,"div",30)(20,"p-button",31),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.isVisible=!1)}),e.qZA(),e.TgZ(21,"p-button",32),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.save())}),e.qZA()()}if(2&o){const t=e.oxw();e.Q6J("ngIf",t.isEdit),e.xp6(4),e.Q6J("options",t.roles)("ngModel",t.user.roleId),e.xp6(4),e.Q6J("options",e.WLB(11,X,e.DdM(9,$),e.DdM(10,W)))("ngModel",t.user.active),e.xp6(4),e.Q6J("ngModel",t.user.email),e.xp6(1),e.Q6J("ngIf",!t.isEdit),e.xp6(4),e.Q6J("ngModel",t.user.fullname),e.xp6(1),e.Q6J("ngIf",t.isEdit)}}const te=function(){return["fullname","email"]},ne=function(){return{"min-width":"75rem"}},oe=function(){return{width:"50vw"}};let ie=(()=>{class o{constructor(t,i,n){this.roleService=t,this.userService=i,this.messageService=n,this.isVisible=!1,this.isEdit=!1}ngOnInit(){this.getRoles(),this.getUsers()}getRoles(){this.roleService.getRoles().subscribe({next:t=>{this.roles=t},error:t=>{console.log(t)}})}getUsers(){this.userService.getUsers().subscribe({next:t=>{this.users=t},error:t=>{console.log(t)}})}getRole(t){return this.roles?.find(i=>i.id===t)?.name}openDialogEdit(t){this.isEdit=!0,this.isVisible=!0,this.user={...t}}openDialogNew(){this.isEdit=!1,this.isVisible=!0,this.user={roleId:1,active:!0}}save(){this.user.id?this.userService.update(this.user.id,this.user).subscribe({next:t=>{this.isVisible=!1;const i=this.users.findIndex(n=>n.id===this.user.id);-1!=i&&(this.users[i]=this.user),this.messageService.add({severity:"success",summary:"Success",detail:"User is updated"})},error:t=>{console.log(t)}}):this.userService.create(this.user).subscribe({next:t=>{this.user.id=t,this.isVisible=!1,this.users.unshift({...this.user,id:t}),this.messageService.add({severity:"success",summary:"Success",detail:"User is added"})},error:t=>{console.log(t)}})}static#e=this.\u0275fac=function(i){return new(i||o)(e.Y36(B),e.Y36(G.K),e.Y36(d.ez))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-user-management"]],features:[e._Bn([d.ez])],decls:9,vars:12,consts:[[1,"card"],[3,"value","globalFilterFields","tableStyle"],["usertable",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["header","User details",3,"visible","modal","draggable","resizable","visibleChange"],["pTemplate","content"],[1,"flex"],["label","New","severity","success","icon","pi pi-plus",3,"click"],[1,"p-input-icon-left","ml-auto"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search...",3,"input"],["search",""],["field","roleId","matchMode","equals",3,"showMenu"],["pTemplate","filter"],["type","boolean","field","active"],["optionLabel","name","optionValue","id",3,"ngModel","options","showClear","onChange"],[1,"cursor-pointer",3,"dblclick"],[1,"pi",3,"ngClass"],["class","flex flex-column gap-2 mb-4",4,"ngIf"],[1,"flex","flex-column","gap-2","mb-4"],["for","role"],["optionLabel","name","optionValue","id",3,"options","ngModel","ngModelChange"],["optionLabel","label","optionValue","value",3,"options","ngModel","ngModelChange"],["for","email"],["pInputText","","id","email",3,"ngModel","ngModelChange"],["for","fullname"],["pInputText","","id","fullname",3,"ngModel","ngModelChange"],[4,"ngIf"],[1,"flex","justify-content-end","gap-2","mb-4"],["label","Cancel","severity","danger",3,"click"],["label","Save","severity","success",3,"click"],["for","id"],["pInputText","","id","id","readonly","",3,"ngModel","ngModelChange"],["for","password"],[3,"ngModel","feedback","inputStyle","ngModelChange"],["for","createdDate"],["pInputText","","id","createdDate","readonly","",3,"ngModel","ngModelChange"],["for","createdBy"],["pInputText","","id","createdBy","readonly","",3,"ngModel","ngModelChange"],["for","lastModifiedDate"],["pInputText","","id","lastModifiedDate","readonly","",3,"ngModel","ngModelChange"],["for","lastModifiedBy"],["pInputText","","id","lastModifiedBy","readonly","",3,"ngModel","ngModelChange"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0)(1,"p-table",1,2),e.YNc(3,Y,6,0,"ng-template",3),e.YNc(4,z,17,1,"ng-template",4),e.YNc(5,k,9,7,"ng-template",5),e.qZA()(),e.TgZ(6,"p-dialog",6),e.NdJ("visibleChange",function(r){return n.isVisible=r}),e.YNc(7,ee,22,14,"ng-template",7),e.qZA(),e._UZ(8,"p-toast")),2&i&&(e.xp6(1),e.Q6J("value",n.users)("globalFilterFields",e.DdM(9,te))("tableStyle",e.DdM(10,ne)),e.xp6(5),e.Akn(e.DdM(11,oe)),e.Q6J("visible",n.isVisible)("modal",!0)("draggable",!1)("resizable",!1))},dependencies:[c.mk,c.O5,K.ro,d.jx,_.zx,h.iA,h.xl,H.Lt,u.o,m.V,V.UN,f.FN,p.Fj,p.JJ,p.On]})}return o})();var se=l(7721);const ae=[{path:"",component:I},{path:"user-management",component:ie},{path:"posts",children:[{path:":postId",component:l(882).k}]}];let re=(()=>{class o{static#e=this.\u0275fac=function(i){return new(i||o)};static#t=this.\u0275mod=e.oAB({type:o});static#n=this.\u0275inj=e.cJS({imports:[se.m,c.ez,x.W,p.u5,C.Bz.forChild(ae)]})}return o})()}}]);